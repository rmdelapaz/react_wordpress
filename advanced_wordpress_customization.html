<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced WordPress Customization: Headless Architecture Mastery</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ 
        startOnLoad: true,
        theme: 'default',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true
        }
      });
    </script>
    <style>
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        .feature-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
        }
        .architecture-box {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        .pro-tip {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning-box {
            background: #fff5f5;
            border-left: 4px solid #fc8181;
            padding: 1rem;
            margin: 1rem 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
        }
        .comparison-table th {
            background: #4a5568;
            color: white;
            padding: 1rem;
            text-align: left;
        }
        .comparison-table td {
            padding: 1rem;
            border: 1px solid #e2e8f0;
        }
        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }
        .code-comment { color: #6a9955; }
        .code-keyword { color: #569cd6; }
        .code-string { color: #ce9178; }
        .code-function { color: #dcdcaa; }
        .code-tag { color: #4ec9b0; }
        .mermaid {
            margin: 2rem 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <h1>üöÄ Advanced WordPress Customization</h1>
        <p>Master headless architecture, custom blocks, GraphQL, and WooCommerce integration</p>
    </header>

    <main>
        <section>
            <h2>The Headless Revolution: WordPress as a Supercharged API</h2>
            <p>Modern WordPress is like transforming a Swiss Army knife into a precision surgical instrument. We're taking WordPress's powerful content management and exposing it through multiple API endpoints, custom blocks, and advanced integrations.</p>

            <canvas id="architectureCanvas" width="600" height="500"></canvas>
            <script>
                const archCanvas = document.getElementById('architectureCanvas');
                const archCtx = archCanvas.getContext('2d');
                
                // Title
                archCtx.font = 'bold 18px Arial';
                archCtx.fillStyle = '#333';
                archCtx.textAlign = 'center';
                archCtx.fillText('Advanced Headless WordPress Architecture', 300, 30);
                
                // WordPress Core
                archCtx.fillStyle = '#21759b';
                archCtx.fillRect(200, 200, 200, 100);
                archCtx.fillStyle = 'white';
                archCtx.font = 'bold 14px Arial';
                archCtx.fillText('WordPress Core', 300, 240);
                archCtx.font = '11px Arial';
                archCtx.fillText('Content ‚Ä¢ Users ‚Ä¢ Media', 300, 260);
                archCtx.fillText('Plugins ‚Ä¢ Database', 300, 280);
                
                // API Layers
                const apis = [
                    {x: 100, y: 100, label: 'REST API', color: '#e74c3c'},
                    {x: 300, y: 60, label: 'GraphQL', color: '#e10098'},
                    {x: 500, y: 100, label: 'Custom Endpoints', color: '#f39c12'}
                ];
                
                apis.forEach(api => {
                    archCtx.fillStyle = api.color;
                    archCtx.fillRect(api.x - 60, api.y - 20, 120, 40);
                    archCtx.fillStyle = 'white';
                    archCtx.font = 'bold 12px Arial';
                    archCtx.fillText(api.label, api.x, api.y + 5);
                    
                    // Connect to WordPress
                    archCtx.strokeStyle = api.color;
                    archCtx.lineWidth = 2;
                    archCtx.beginPath();
                    archCtx.moveTo(api.x, api.y + 20);
                    archCtx.lineTo(300, 200);
                    archCtx.stroke();
                });
                
                // Frontend Consumers
                const consumers = [
                    {x: 100, y: 380, label: 'React App', color: '#61dafb'},
                    {x: 200, y: 430, label: 'Mobile App', color: '#2ecc71'},
                    {x: 300, y: 380, label: 'Vue App', color: '#4fc08d'},
                    {x: 400, y: 430, label: 'Next.js', color: '#000'},
                    {x: 500, y: 380, label: 'Gatsby', color: '#663399'}
                ];
                
                consumers.forEach(consumer => {
                    archCtx.fillStyle = consumer.color;
                    archCtx.beginPath();
                    archCtx.arc(consumer.x, consumer.y, 35, 0, Math.PI * 2);
                    archCtx.fill();
                    
                    archCtx.fillStyle = 'white';
                    archCtx.font = '10px Arial';
                    archCtx.fillText(consumer.label, consumer.x, consumer.y + 3);
                    
                    // Connect from WordPress
                    archCtx.strokeStyle = '#ccc';
                    archCtx.lineWidth = 1;
                    archCtx.setLineDash([5, 5]);
                    archCtx.beginPath();
                    archCtx.moveTo(300, 300);
                    archCtx.lineTo(consumer.x, consumer.y - 35);
                    archCtx.stroke();
                });
                archCtx.setLineDash([]);
                
                // Features boxes
                const features = [
                    {x: 50, y: 200, label: 'Gutenberg\nBlocks'},
                    {x: 550, y: 200, label: 'WooCommerce\nHeadless'}
                ];
                
                features.forEach(feature => {
                    archCtx.fillStyle = '#9b59b6';
                    archCtx.globalAlpha = 0.8;
                    archCtx.fillRect(feature.x - 40, feature.y - 30, 80, 60);
                    archCtx.globalAlpha = 1;
                    
                    archCtx.fillStyle = 'white';
                    archCtx.font = '10px Arial';
                    archCtx.textAlign = 'center';
                    const lines = feature.label.split('\n');
                    lines.forEach((line, i) => {
                        archCtx.fillText(line, feature.x, feature.y - 5 + i * 15);
                    });
                });
            </script>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3 style="color: #21759b;">üéØ Custom Gutenberg Blocks</h3>
                    <p>Build blocks that output structured data for your headless frontend</p>
                </div>
                <div class="feature-card">
                    <h3 style="color: #e10098;">‚ö° GraphQL Integration</h3>
                    <p>Query exactly what you need with WPGraphQL</p>
                </div>
                <div class="feature-card">
                    <h3 style="color: #663399;">üõçÔ∏è WooCommerce Headless</h3>
                    <p>Build blazing-fast e-commerce experiences</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Custom Gutenberg Blocks for Headless WordPress</h2>
            <p>Creating Gutenberg blocks for headless WordPress is like building LEGO pieces that work both in the WordPress editor AND output clean data for your React frontend. It's the best of both worlds!</p>

            <div class="mermaid">
            graph TB
                A[Block Registration] --> B[Editor Interface]
                B --> C[Save Function]
                C --> D[REST API Output]
                D --> E[React Frontend]
                
                B --> F[Block Attributes]
                F --> G[InnerBlocks]
                F --> H[Dynamic Data]
                
                style A fill:#3498db
                style D fill:#e74c3c
                style E fill:#61dafb
            </div>

            <h3>Creating a Hero Block for Headless</h3>
            <div class="code-block">
<pre><span class="code-comment">// blocks/hero-block/index.js - Custom Gutenberg Block</span>
<span class="code-keyword">import</span> { registerBlockType } <span class="code-keyword">from</span> <span class="code-string">'@wordpress/blocks'</span>;
<span class="code-keyword">import</span> { 
    RichText, 
    InspectorControls, 
    MediaUpload,
    MediaUploadCheck,
    InnerBlocks 
} <span class="code-keyword">from</span> <span class="code-string">'@wordpress/block-editor'</span>;
<span class="code-keyword">import</span> { 
    PanelBody, 
    TextControl, 
    SelectControl,
    ToggleControl,
    Button 
} <span class="code-keyword">from</span> <span class="code-string">'@wordpress/components'</span>;

<span class="code-function">registerBlockType</span>(<span class="code-string">'custom/hero-block'</span>, {
    title: <span class="code-string">'Hero Section'</span>,
    icon: <span class="code-string">'cover-image'</span>,
    category: <span class="code-string">'design'</span>,
    attributes: {
        title: {
            type: <span class="code-string">'string'</span>,
            source: <span class="code-string">'html'</span>,
            selector: <span class="code-string">'.hero-title'</span>
        },
        subtitle: {
            type: <span class="code-string">'string'</span>,
            source: <span class="code-string">'html'</span>,
            selector: <span class="code-string">'.hero-subtitle'</span>
        },
        backgroundImage: {
            type: <span class="code-string">'object'</span>,
            default: {}
        },
        ctaText: {
            type: <span class="code-string">'string'</span>,
            default: <span class="code-string">'Learn More'</span>
        },
        ctaLink: {
            type: <span class="code-string">'string'</span>,
            default: <span class="code-string">''</span>
        },
        alignment: {
            type: <span class="code-string">'string'</span>,
            default: <span class="code-string">'center'</span>
        },
        overlay: {
            type: <span class="code-string">'boolean'</span>,
            default: <span class="code-keyword">true</span>
        }
    },
    
    <span class="code-function">edit</span>: ({ attributes, setAttributes }) => {
        <span class="code-comment">// Editor component code...</span>
    },
    
    <span class="code-function">save</span>: ({ attributes }) => {
        <span class="code-comment">// Save function code...</span>
    }
});</pre>
            </div>

            <div class="pro-tip">
                <strong>üí° Pro Tip:</strong> Create a block library that works seamlessly between WordPress admin and your headless frontend. This gives content editors familiar tools while developers get clean, structured data.
            </div>
        </section>

        <section>
            <h2>GraphQL with WPGraphQL: Query Exactly What You Need</h2>
            <p>GraphQL is like ordering √† la carte instead of a fixed menu. With REST, you get the entire meal whether you want it or not. With GraphQL, you pick exactly what you need - no more, no less!</p>

            <canvas id="graphqlCanvas" width="600" height="400"></canvas>
            <script>
                const gqlCanvas = document.getElementById('graphqlCanvas');
                const gqlCtx = gqlCanvas.getContext('2d');
                
                // Title
                gqlCtx.font = 'bold 18px Arial';
                gqlCtx.fillStyle = '#333';
                gqlCtx.textAlign = 'center';
                gqlCtx.fillText('REST vs GraphQL Data Fetching', 300, 30);
                
                // REST Side
                gqlCtx.fillStyle = '#e74c3c';
                gqlCtx.fillRect(50, 80, 230, 280);
                gqlCtx.fillStyle = 'white';
                gqlCtx.font = 'bold 14px Arial';
                gqlCtx.fillText('REST API', 165, 105);
                
                // REST requests
                const restEndpoints = [
                    '/posts/1',
                    '/users/5',
                    '/comments?post=1',
                    '/categories/3'
                ];
                
                gqlCtx.font = '11px Courier';
                restEndpoints.forEach((endpoint, i) => {
                    gqlCtx.fillStyle = '#ffebee';
                    gqlCtx.fillRect(60, 120 + i * 35, 210, 25);
                    gqlCtx.fillStyle = '#c62828';
                    gqlCtx.fillText('GET ' + endpoint, 65, 137 + i * 35);
                });
                
                gqlCtx.fillStyle = 'white';
                gqlCtx.font = '12px Arial';
                gqlCtx.fillText('4 Requests = 4 Round Trips', 165, 290);
                gqlCtx.fillText('~2.5KB transferred', 165, 310);
                gqlCtx.fillText('Overfetching data', 165, 330);
                
                // GraphQL Side
                gqlCtx.fillStyle = '#e10098';
                gqlCtx.fillRect(320, 80, 230, 280);
                gqlCtx.fillStyle = 'white';
                gqlCtx.font = 'bold 14px Arial';
                gqlCtx.fillText('GraphQL', 435, 105);
                
                // GraphQL query
                gqlCtx.fillStyle = '#fce4ec';
                gqlCtx.fillRect(330, 120, 210, 140);
                gqlCtx.fillStyle = '#880e4f';
                gqlCtx.font = '10px Courier';
                gqlCtx.textAlign = 'left';
                const query = [
                    'query GetPost {',
                    '  post(id: 1) {',
                    '    title',
                    '    author { name }',
                    '    comments { text }',
                    '    category { name }',
                    '  }',
                    '}'
                ];
                query.forEach((line, i) => {
                    gqlCtx.fillText(line, 335, 135 + i * 18);
                });
                
                gqlCtx.fillStyle = 'white';
                gqlCtx.font = '12px Arial';
                gqlCtx.textAlign = 'center';
                gqlCtx.fillText('1 Request = 1 Round Trip', 435, 290);
                gqlCtx.fillText('~0.8KB transferred', 435, 310);
                gqlCtx.fillText('Exact data needed', 435, 330);
                
                // Comparison arrow
                gqlCtx.strokeStyle = '#2ecc71';
                gqlCtx.lineWidth = 3;
                gqlCtx.beginPath();
                gqlCtx.moveTo(280, 200);
                gqlCtx.lineTo(320, 200);
                gqlCtx.stroke();
                
                // Arrow head
                gqlCtx.beginPath();
                gqlCtx.moveTo(315, 195);
                gqlCtx.lineTo(325, 200);
                gqlCtx.lineTo(315, 205);
                gqlCtx.closePath();
                gqlCtx.fillStyle = '#2ecc71';
                gqlCtx.fill();
                
                gqlCtx.fillStyle = '#2ecc71';
                gqlCtx.font = 'bold 24px Arial';
                gqlCtx.fillText('70% Less Data!', 300, 390);
            </script>

            <h3>Setting Up WPGraphQL</h3>
            <div class="code-block">
<pre><span class="code-comment">// Install WPGraphQL plugin first, then extend it</span>
<span class="code-comment">// functions.php - Custom GraphQL Types and Fields</span>

<span class="code-comment">// Register custom post type with GraphQL support</span>
<span class="code-keyword">function</span> <span class="code-function">register_project_post_type</span>() {
    <span class="code-function">register_post_type</span>(<span class="code-string">'project'</span>, [
        <span class="code-string">'label'</span> => <span class="code-string">'Projects'</span>,
        <span class="code-string">'public'</span> => <span class="code-keyword">true</span>,
        <span class="code-string">'show_in_graphql'</span> => <span class="code-keyword">true</span>,
        <span class="code-string">'graphql_single_name'</span> => <span class="code-string">'project'</span>,
        <span class="code-string">'graphql_plural_name'</span> => <span class="code-string">'projects'</span>,
        <span class="code-string">'supports'</span> => [<span class="code-string">'title'</span>, <span class="code-string">'editor'</span>, <span class="code-string">'thumbnail'</span>, <span class="code-string">'custom-fields'</span>]
    ]);
}
<span class="code-function">add_action</span>(<span class="code-string">'init'</span>, <span class="code-string">'register_project_post_type'</span>);</pre>
            </div>

            <div class="pro-tip">
                <strong>üí° Pro Tip:</strong> Use GraphQL Playground during development to test queries and explore your schema. Install the WPGraphQL IDE plugin for an integrated experience in WordPress admin!
            </div>
        </section>

        <section>
            <h2>Custom REST Endpoints: Building Your API Highway</h2>
            <p>Sometimes you need custom highways for specific data journeys. Custom REST endpoints let you create optimized routes for complex queries, third-party integrations, or specialized functionality.</p>

            <div class="mermaid">
graph LR
  A["/api/v1/search"] --> B[Advanced Search]
  C["/api/v1/analytics"] --> D[Site Analytics]
  E["/api/v1/recommendations"] --> F[AI Recommendations]
  G["/api/v1/export"] --> H[Data Export]

  B --> I[Elasticsearch Integration]
  D --> J[Custom Metrics]
  F --> K[Machine Learning]
  H --> L[CSV/JSON/XML]

  style A fill:#3498db
  style C fill:#e74c3c
  style E fill:#2ecc71
  style G fill:#f39c12
</div>


            <h3>Creating Advanced Custom Endpoints</h3>
            <div class="code-block">
<pre><span class="code-comment">// inc/custom-endpoints.php - Advanced Custom REST Endpoints</span>

<span class="code-keyword">class</span> <span class="code-function">Advanced_REST_Controller</span> {
    <span class="code-keyword">private</span> $namespace = <span class="code-string">'custom/v1'</span>;
    
    <span class="code-keyword">public function</span> <span class="code-function">__construct</span>() {
        <span class="code-function">add_action</span>(<span class="code-string">'rest_api_init'</span>, [$this, <span class="code-string">'register_routes'</span>]);
    }
    
    <span class="code-keyword">public function</span> <span class="code-function">register_routes</span>() {
        <span class="code-comment">// Advanced search endpoint</span>
        <span class="code-function">register_rest_route</span>($this->namespace, <span class="code-string">'/search'</span>, [
            <span class="code-string">'methods'</span> => <span class="code-string">'POST'</span>,
            <span class="code-string">'callback'</span> => [$this, <span class="code-string">'advanced_search'</span>],
            <span class="code-string">'permission_callback'</span> => <span class="code-string">'__return_true'</span>
        ]);
    }
}</pre>
            </div>
        </section>

        <section>
            <h2>WordPress Multisite for Enterprise Solutions</h2>
            <p>Multisite is WordPress's superpower for managing multiple sites from a single installation. Perfect for franchises, educational institutions, or SaaS platforms!</p>

            <div class="mermaid">
            graph TD
                A[WordPress Multisite Network] --> B[Main Site]
                A --> C[Subsite 1]
                A --> D[Subsite 2]
                A --> E[Subsite N]
                
                B --> F[Shared Plugins]
                B --> G[Shared Themes]
                B --> H[Network Admin]
                
                C --> I[Site-specific Content]
                D --> J[Site-specific Users]
                E --> K[Site-specific Settings]
                
                style A fill:#21759b
                style H fill:#e74c3c
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Single Site</th>
                        <th>Multisite</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Installation</td>
                        <td>One WordPress install</td>
                        <td>One install, multiple sites</td>
                    </tr>
                    <tr>
                        <td>Database</td>
                        <td>One set of tables</td>
                        <td>Shared + site-specific tables</td>
                    </tr>
                    <tr>
                        <td>Plugins</td>
                        <td>Site-wide activation</td>
                        <td>Network or per-site activation</td>
                    </tr>
                    <tr>
                        <td>Themes</td>
                        <td>All themes available</td>
                        <td>Network admin controls availability</td>
                    </tr>
                    <tr>
                        <td>Users</td>
                        <td>One user base</td>
                        <td>Shared users, site-specific roles</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>WooCommerce Headless E-commerce</h2>
            <p>Transform WooCommerce into a powerful e-commerce API, powering React, Next.js, or mobile apps with blazing-fast shopping experiences!</p>

            <div class="architecture-box">
                <h3>üõí WooCommerce Headless Architecture</h3>
                <div class="code-block">
<pre><span class="code-comment">// Setting up WooCommerce for headless commerce</span>
<span class="code-comment">// functions.php - WooCommerce REST API Extensions</span>

<span class="code-keyword">function</span> <span class="code-function">setup_woocommerce_headless</span>() {
    <span class="code-comment">// Enable CORS for headless frontend</span>
    <span class="code-function">add_action</span>(<span class="code-string">'rest_api_init'</span>, <span class="code-keyword">function</span>() {
        <span class="code-function">remove_filter</span>(<span class="code-string">'rest_pre_serve_request'</span>, <span class="code-string">'rest_send_cors_headers'</span>);
        <span class="code-function">add_filter</span>(<span class="code-string">'rest_pre_serve_request'</span>, <span class="code-keyword">function</span>($value) {
            <span class="code-function">header</span>(<span class="code-string">'Access-Control-Allow-Origin: *'</span>);
            <span class="code-function">header</span>(<span class="code-string">'Access-Control-Allow-Methods: GET, POST, OPTIONS, PUT, DELETE'</span>);
            <span class="code-function">header</span>(<span class="code-string">'Access-Control-Allow-Credentials: true'</span>);
            <span class="code-function">header</span>(<span class="code-string">'Access-Control-Allow-Headers: Authorization, Content-Type'</span>);
            <span class="code-keyword">return</span> $value;
        });
    });
    
    <span class="code-comment">// Add custom product fields to REST API</span>
    <span class="code-function">register_rest_field</span>(<span class="code-string">'product'</span>, <span class="code-string">'custom_fields'</span>, [
        <span class="code-string">'get_callback'</span> => <span class="code-keyword">function</span>($product) {
            <span class="code-keyword">return</span> [
                <span class="code-string">'featured'</span> => <span class="code-function">get_field</span>(<span class="code-string">'featured'</span>, $product[<span class="code-string">'id'</span>]),
                <span class="code-string">'video_url'</span> => <span class="code-function">get_field</span>(<span class="code-string">'video_url'</span>, $product[<span class="code-string">'id'</span>]),
                <span class="code-string">'specifications'</span> => <span class="code-function">get_field</span>(<span class="code-string">'specifications'</span>, $product[<span class="code-string">'id'</span>])
            ];
        }
    ]);
}
<span class="code-function">add_action</span>(<span class="code-string">'init'</span>, <span class="code-string">'setup_woocommerce_headless'</span>);</pre>
                </div>
            </div>

            <div class="pro-tip">
                <strong>üí° Pro Tip:</strong> Use WooCommerce webhooks to sync inventory in real-time and implement server-side cart sessions for better cart persistence across devices!
            </div>
        </section>

        <section>
            <h2>Performance & Optimization Strategies</h2>
            <p>Advanced WordPress customization isn't complete without optimizing for blazing-fast performance. Here are enterprise-level strategies:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üöÄ Object Caching</h3>
                    <div class="code-block">
<pre><span class="code-comment">// Redis object caching</span>
<span class="code-keyword">function</span> <span class="code-function">get_cached_data</span>($key, $callback, $expiration = 3600) {
    $cached = <span class="code-function">wp_cache_get</span>($key, <span class="code-string">'my_cache_group'</span>);
    
    <span class="code-keyword">if</span> ($cached === <span class="code-keyword">false</span>) {
        $data = <span class="code-function">$callback</span>();
        <span class="code-function">wp_cache_set</span>($key, $data, <span class="code-string">'my_cache_group'</span>, $expiration);
        <span class="code-keyword">return</span> $data;
    }
    
    <span class="code-keyword">return</span> $cached;
}</pre>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>‚ö° GraphQL Persisted Queries</h3>
                    <div class="code-block">
<pre><span class="code-comment">// Persisted queries for GraphQL</span>
<span class="code-keyword">const</span> persistedQueries = {
    <span class="code-string">'getProducts'</span>: <span class="code-string">'query_hash_123'</span>,
    <span class="code-string">'getCart'</span>: <span class="code-string">'query_hash_456'</span>
};

<span class="code-comment">// Use hash instead of full query</span>
<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> <span class="code-function">fetch</span>(<span class="code-string">'/graphql'</span>, {
    method: <span class="code-string">'POST'</span>,
    body: JSON.<span class="code-function">stringify</span>({
        persistedQuery: {
            sha256Hash: persistedQueries.getProducts
        }
    })
});</pre>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>üì¶ Edge Caching</h3>
                    <div class="code-block">
<pre><span class="code-comment">// Cloudflare Workers edge caching</span>
addEventListener(<span class="code-string">'fetch'</span>, event => {
    event.<span class="code-function">respondWith</span>(<span class="code-function">handleRequest</span>(event.request))
});

<span class="code-keyword">async function</span> <span class="code-function">handleRequest</span>(request) {
    <span class="code-keyword">const</span> cache = caches.default;
    <span class="code-keyword">let</span> response = <span class="code-keyword">await</span> cache.<span class="code-function">match</span>(request);
    
    <span class="code-keyword">if</span> (!response) {
        response = <span class="code-keyword">await</span> <span class="code-function">fetch</span>(request);
        event.<span class="code-function">waitUntil</span>(cache.<span class="code-function">put</span>(request, response.<span class="code-function">clone</span>()));
    }
    
    <span class="code-keyword">return</span> response;
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Security Best Practices</h2>
            <p>When exposing WordPress through APIs, security becomes paramount. Here's your fortress strategy:</p>

            <div class="architecture-box">
                <h3>üîê Security Layers</h3>
                <div class="code-block">
<pre><span class="code-comment">// JWT Authentication for headless WordPress</span>
<span class="code-keyword">class</span> <span class="code-function">JWT_Auth</span> {
    <span class="code-keyword">public function</span> <span class="code-function">__construct</span>() {
        <span class="code-function">add_filter</span>(<span class="code-string">'rest_authentication_errors'</span>, [$this, <span class="code-string">'jwt_auth_handler'</span>], 20);
        <span class="code-function">add_action</span>(<span class="code-string">'rest_api_init'</span>, [$this, <span class="code-string">'register_auth_endpoints'</span>]);
    }
    
    <span class="code-keyword">public function</span> <span class="code-function">jwt_auth_handler</span>($error) {
        <span class="code-keyword">if</span> (!<span class="code-keyword">empty</span>($error)) {
            <span class="code-keyword">return</span> $error;
        }
        
        <span class="code-keyword">if</span> (!<span class="code-function">is_user_logged_in</span>()) {
            $token = $this-><span class="code-function">get_bearer_token</span>();
            
            <span class="code-keyword">if</span> ($token) {
                <span class="code-keyword">try</span> {
                    $decoded = JWT::<span class="code-function">decode</span>(
                        $token,
                        <span class="code-function">get_option</span>(<span class="code-string">'jwt_secret_key'</span>),
                        [<span class="code-string">'HS256'</span>]
                    );
                    
                    <span class="code-function">wp_set_current_user</span>($decoded->data->user->id);
                } <span class="code-keyword">catch</span> (Exception $e) {
                    <span class="code-keyword">return new</span> <span class="code-function">WP_Error</span>(
                        <span class="code-string">'jwt_auth_invalid_token'</span>,
                        <span class="code-string">'Invalid authentication token'</span>,
                        [<span class="code-string">'status'</span> => 401]
                    );
                }
            }
        }
        
        <span class="code-keyword">return</span> $error;
    }
}</pre>
                </div>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è Security Checklist:</strong>
                    <ul style="margin-top: 0.5rem;">
                        <li>‚úì Implement JWT or OAuth2 authentication</li>
                        <li>‚úì Use HTTPS everywhere</li>
                        <li>‚úì Implement rate limiting</li>
                        <li>‚úì Sanitize all inputs</li>
                        <li>‚úì Use nonces for state-changing operations</li>
                        <li>‚úì Implement CORS properly</li>
                        <li>‚úì Regular security audits</li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <h2>Deployment & DevOps</h2>
            <p>Deploy your headless WordPress like a pro with modern CI/CD pipelines:</p>

            <div class="code-block">
<pre><span class="code-comment"># .github/workflows/deploy.yml</span>
name: Deploy Headless WordPress

on:
  push:
    branches: [main]

jobs:
  deploy-wordpress:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Deploy WordPress to Server
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          key: ${{ secrets.SERVER_KEY }}
          script: |
            cd /var/www/wordpress
            git pull origin main
            composer install --no-dev
            wp core update
            wp plugin update --all
            wp cache flush
            
  deploy-react:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Build React App
        run: |
          npm ci
          npm run build
          
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-args: '--prod'
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}</pre>
            </div>
        </section>

        <footer>
            <div class="highlight-box">
                <h2 style="color: white; margin-bottom: 1rem;">üöÄ Advanced WordPress Mastery Complete!</h2>
                <p style="color: white; margin-bottom: 1rem;">You've unlocked the full potential of headless WordPress:</p>
                <ul style="color: white; margin-bottom: 1rem;">
                    <li>‚úÖ Custom Gutenberg blocks for structured content</li>
                    <li>‚úÖ GraphQL integration with WPGraphQL</li>
                    <li>‚úÖ Advanced custom REST endpoints</li>
                    <li>‚úÖ WordPress Multisite for enterprise solutions</li>
                    <li>‚úÖ WooCommerce headless e-commerce</li>
                    <li>‚úÖ Performance optimization strategies</li>
                    <li>‚úÖ Security best practices</li>
                </ul>
                <p style="color: white; font-weight: bold;">You're now equipped to build enterprise-grade headless WordPress applications that scale to millions of users!</p>
            </div>
            
            <div style="margin-top: 2rem; padding: 1.5rem; background: #f7fafc; border-radius: 8px;">
                <h3>üéì Next Steps</h3>
                <ul>
                    <li>Implement server-side rendering with Next.js for SEO</li>
                    <li>Add real-time features with WebSockets</li>
                    <li>Integrate AI/ML for content recommendations</li>
                    <li>Build a Progressive Web App (PWA)</li>
                    <li>Implement advanced caching strategies</li>
                </ul>
            </div>
        </footer>
    </main>
</body>
</html>
