<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Playground - Live React Component Editor</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #61dafb 0%, #282c34 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .logo {
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .playground-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 968px) {
            .playground-container {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: #282c34;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .panel-header {
            background: #20232a;
            color: #61dafb;
            padding: 15px 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-container {
            position: relative;
            height: 500px;
        }

        #code-editor {
            width: 100%;
            height: 100%;
            padding: 20px;
            background: #282c34;
            color: #abb2bf;
            border: none;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }

        .preview-container {
            padding: 20px;
            background: white;
            min-height: 500px;
        }

        #preview {
            width: 100%;
            min-height: 460px;
        }

        .error-display {
            background: #ff5252;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .controls {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #61dafb;
            color: #282c34;
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-warning {
            background: #ff9800;
            color: white;
        }

        .btn-danger {
            background: #f44336;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .template-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-card:hover {
            border-color: #61dafb;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .template-card h3 {
            color: #333;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .template-card p {
            color: #666;
            font-size: 0.9em;
        }

        .auto-run-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #61dafb;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .line-numbers {
            position: absolute;
            left: 0;
            top: 0;
            padding: 20px 10px;
            background: #20232a;
            color: #5c6370;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            user-select: none;
            pointer-events: none;
        }

        .console-panel {
            background: #1e1e1e;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .console-header {
            color: #61dafb;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .console-output {
            background: #282c34;
            border-radius: 6px;
            padding: 15px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .console-log {
            color: #abb2bf;
            margin: 5px 0;
        }

        .console-error {
            color: #ff5252;
            margin: 5px 0;
        }

        .console-warn {
            color: #ffb74d;
            margin: 5px 0;
        }

        .clear-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .shortcuts-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .shortcuts-info h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            color: #666;
        }

        .shortcut-key {
            background: #e0e0e0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <span class="logo">‚öõÔ∏è</span>
            Component Playground - Live React Editor
        </h1>

        <div class="controls">
            <div class="btn-group">
                <button class="btn btn-primary" onclick="runCode()">‚ñ∂ Run Code</button>
                <button class="btn btn-success" onclick="formatCode()">üé® Format</button>
                <button class="btn btn-warning" onclick="saveCode()">üíæ Save</button>
                <button class="btn btn-danger" onclick="clearCode()">üóëÔ∏è Clear</button>
                <button class="btn btn-secondary" onclick="exportCode()">üì§ Export</button>
            </div>
            <div class="auto-run-container">
                <label class="toggle-switch">
                    <input type="checkbox" id="auto-run" checked>
                    <span class="slider"></span>
                </label>
                <label for="auto-run">Auto-run code</label>
            </div>
        </div>

        <div class="playground-container">
            <div class="panel">
                <div class="panel-header">
                    <span>üìù Code Editor</span>
                    <span style="font-size: 0.9em; opacity: 0.8;">React + JSX</span>
                </div>
                <div class="editor-container">
                    <div class="line-numbers" id="line-numbers"></div>
                    <textarea id="code-editor" spellcheck="false" style="padding-left: 50px;">// Welcome to React Component Playground!
// Start typing your React component below

function App() {
  const [count, setCount] = React.useState(0);
  const [name, setName] = React.useState('World');
  
  const handleIncrement = () => {
    setCount(count + 1);
    console.log('Count incremented to:', count + 1);
  };
  
  return (
    &lt;div style={{ padding: '20px', fontFamily: 'Arial' }}&gt;
      &lt;h1 style={{ color: '#61dafb' }}&gt;
        Hello, {name}! üëã
      &lt;/h1&gt;
      
      &lt;div style={{ marginBottom: '20px' }}&gt;
        &lt;input 
          type="text" 
          value={name}
          onChange={(e) =&gt; setName(e.target.value)}
          placeholder="Enter your name"
          style={{
            padding: '10px',
            borderRadius: '6px',
            border: '2px solid #61dafb',
            fontSize: '16px'
          }}
        /&gt;
      &lt;/div&gt;
      
      &lt;div style={{ marginBottom: '20px' }}&gt;
        &lt;button 
          onClick={handleIncrement}
          style={{
            padding: '10px 20px',
            background: '#61dafb',
            color: '#282c34',
            border: 'none',
            borderRadius: '6px',
            fontSize: '16px',
            fontWeight: 'bold',
            cursor: 'pointer'
          }}
        &gt;
          Clicked {count} times
        &lt;/button&gt;
      &lt;/div&gt;
      
      &lt;p style={{ color: '#666' }}&gt;
        Try editing this component and see the changes live!
      &lt;/p&gt;
    &lt;/div&gt;
  );
}

// Component will be rendered automatically
render(&lt;App /&gt;);</textarea>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span>üëÅÔ∏è Live Preview</span>
                    <span id="preview-status" style="font-size: 0.9em; opacity: 0.8;">Ready</span>
                </div>
                <div class="preview-container">
                    <div id="preview"></div>
                </div>
            </div>
        </div>

        <div class="console-panel">
            <div class="console-header">
                <span>üñ•Ô∏è Console Output</span>
                <button class="clear-btn" onclick="clearConsole()">Clear</button>
            </div>
            <div class="console-output" id="console-output">
                <div class="console-log">Console output will appear here...</div>
            </div>
        </div>

        <div class="controls" style="margin-top: 20px;">
            <h3 style="margin-bottom: 15px; color: #333;">üìö Component Templates</h3>
            <div class="templates-grid">
                <div class="template-card" onclick="loadTemplate('counter')">
                    <h3>Counter</h3>
                    <p>Simple counter with hooks</p>
                </div>
                <div class="template-card" onclick="loadTemplate('form')">
                    <h3>Form</h3>
                    <p>Controlled form component</p>
                </div>
                <div class="template-card" onclick="loadTemplate('todo')">
                    <h3>Todo List</h3>
                    <p>Interactive todo app</p>
                </div>
                <div class="template-card" onclick="loadTemplate('fetch')">
                    <h3>API Fetch</h3>
                    <p>Data fetching example</p>
                </div>
                <div class="template-card" onclick="loadTemplate('timer')">
                    <h3>Timer</h3>
                    <p>useEffect timer example</p>
                </div>
                <div class="template-card" onclick="loadTemplate('context')">
                    <h3>Context API</h3>
                    <p>Theme context example</p>
                </div>
            </div>
        </div>

        <div class="shortcuts-info">
            <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
            <div class="shortcut-item">
                <span>Run code</span>
                <span class="shortcut-key">Ctrl + Enter</span>
            </div>
            <div class="shortcut-item">
                <span>Format code</span>
                <span class="shortcut-key">Ctrl + Shift + F</span>
            </div>
            <div class="shortcut-item">
                <span>Save code</span>
                <span class="shortcut-key">Ctrl + S</span>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Store original console methods
        const originalConsole = {
            log: console.log,
            error: console.error,
            warn: console.warn
        };

        // Override console methods to capture output
        const consoleOutput = document.getElementById('console-output');
        
        console.log = function(...args) {
            originalConsole.log(...args);
            addConsoleMessage('log', args.join(' '));
        };
        
        console.error = function(...args) {
            originalConsole.error(...args);
            addConsoleMessage('error', args.join(' '));
        };
        
        console.warn = function(...args) {
            originalConsole.warn(...args);
            addConsoleMessage('warn', args.join(' '));
        };

        function addConsoleMessage(type, message) {
            const div = document.createElement('div');
            div.className = `console-${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        function clearConsole() {
            consoleOutput.innerHTML = '<div class="console-log">Console cleared</div>';
        }

        function updateLineNumbers() {
            const editor = document.getElementById('code-editor');
            const lineNumbers = document.getElementById('line-numbers');
            const lines = editor.value.split('\n').length;
            
            let numbersHtml = '';
            for (let i = 1; i <= lines; i++) {
                numbersHtml += i + '\n';
            }
            lineNumbers.textContent = numbersHtml;
        }

        function runCode() {
            const code = document.getElementById('code-editor').value;
            const preview = document.getElementById('preview');
            const status = document.getElementById('preview-status');
            
            try {
                // Clear previous content
                preview.innerHTML = '';
                
                // Create a render function
                const render = (component) => {
                    const root = ReactDOM.createRoot(preview);
                    root.render(component);
                };
                
                // Transform and execute the code
                const transformedCode = Babel.transform(code, {
                    presets: ['react']
                }).code;
                
                // Create a function with React and render in scope
                const func = new Function('React', 'render', transformedCode);
                func(React, render);
                
                status.textContent = 'Running';
                status.style.color = '#4caf50';
                
            } catch (error) {
                preview.innerHTML = `<div class="error-display">
                    <strong>Error:</strong><br>
                    ${error.message}
                </div>`;
                
                console.error('Compilation error:', error.message);
                status.textContent = 'Error';
                status.style.color = '#f44336';
            }
        }

        function formatCode() {
            const editor = document.getElementById('code-editor');
            // Simple formatting - in a real app, you'd use a proper formatter
            let code = editor.value;
            
            // Basic formatting rules
            code = code.replace(/\s+</g, '\n<'); // New line before tags
            code = code.replace(/>\s+/g, '>\n'); // New line after tags
            code = code.replace(/\n\n+/g, '\n\n'); // Remove multiple empty lines
            
            editor.value = code;
            updateLineNumbers();
        }

        function saveCode() {
            const code = document.getElementById('code-editor').value;
            localStorage.setItem('react-playground-code', code);
            alert('Code saved to browser storage!');
        }

        function clearCode() {
            if (confirm('Are you sure you want to clear all code?')) {
                document.getElementById('code-editor').value = '// Start coding here...\n\nfunction App() {\n  return <div>Hello World!</div>;\n}\n\nrender(<App />);';
                updateLineNumbers();
                runCode();
            }
        }

        function exportCode() {
            const code = document.getElementById('code-editor').value;
            const blob = new Blob([code], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'component.jsx';
            a.click();
            URL.revokeObjectURL(url);
        }

        function loadTemplate(template) {
            const templates = {
                counter: `// Counter Component Example
function App() {
  const [count, setCount] = React.useState(0);
  
  return (
    <div style={{ padding: '20px', textAlign: 'center' }}>
      <h1>Counter: {count}</h1>
      <button 
        onClick={() => setCount(count + 1)}
        style={{
          padding: '10px 20px',
          margin: '5px',
          background: '#4caf50',
          color: 'white',
          border: 'none',
          borderRadius: '6px',
          cursor: 'pointer'
        }}
      >
        Increment
      </button>
      <button 
        onClick={() => setCount(count - 1)}
        style={{
          padding: '10px 20px',
          margin: '5px',
          background: '#f44336',
          color: 'white',
          border: 'none',
          borderRadius: '6px',
          cursor: 'pointer'
        }}
      >
        Decrement
      </button>
      <button 
        onClick={() => setCount(0)}
        style={{
          padding: '10px 20px',
          margin: '5px',
          background: '#2196f3',
          color: 'white',
          border: 'none',
          borderRadius: '6px',
          cursor: 'pointer'
        }}
      >
        Reset
      </button>
    </div>
  );
}

render(<App />);`,

                form: `// Form Component Example
function App() {
  const [formData, setFormData] = React.useState({
    name: '',
    email: '',
    message: ''
  });
  
  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };
  
  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('Form submitted:', formData);
    alert('Form submitted! Check console for details.');
  };
  
  return (
    <div style={{ padding: '20px', maxWidth: '400px' }}>
      <h2>Contact Form</h2>
      <form onSubmit={handleSubmit}>
        <div style={{ marginBottom: '15px' }}>
          <input
            type="text"
            name="name"
            placeholder="Your Name"
            value={formData.name}
            onChange={handleChange}
            style={{
              width: '100%',
              padding: '10px',
              borderRadius: '4px',
              border: '1px solid #ddd'
            }}
          />
        </div>
        <div style={{ marginBottom: '15px' }}>
          <input
            type="email"
            name="email"
            placeholder="Your Email"
            value={formData.email}
            onChange={handleChange}
            style={{
              width: '100%',
              padding: '10px',
              borderRadius: '4px',
              border: '1px solid #ddd'
            }}
          />
        </div>
        <div style={{ marginBottom: '15px' }}>
          <textarea
            name="message"
            placeholder="Your Message"
            value={formData.message}
            onChange={handleChange}
            rows="4"
            style={{
              width: '100%',
              padding: '10px',
              borderRadius: '4px',
              border: '1px solid #ddd'
            }}
          />
        </div>
        <button
          type="submit"
          style={{
            padding: '10px 20px',
            background: '#61dafb',
            color: '#282c34',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}
        >
          Submit
        </button>
      </form>
    </div>
  );
}

render(<App />);`,

                todo: `// Todo List Component
function App() {
  const [todos, setTodos] = React.useState([]);
  const [input, setInput] = React.useState('');
  
  const addTodo = () => {
    if (input.trim()) {
      setTodos([...todos, {
        id: Date.now(),
        text: input,
        completed: false
      }]);
      setInput('');
    }
  };
  
  const toggleTodo = (id) => {
    setTodos(todos.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    ));
  };
  
  const deleteTodo = (id) => {
    setTodos(todos.filter(todo => todo.id !== id));
  };
  
  return (
    <div style={{ padding: '20px', maxWidth: '500px' }}>
      <h2>üìù Todo List</h2>
      <div style={{ display: 'flex', marginBottom: '20px' }}>
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && addTodo()}
          placeholder="Add a new todo..."
          style={{
            flex: 1,
            padding: '10px',
            borderRadius: '4px 0 0 4px',
            border: '2px solid #61dafb'
          }}
        />
        <button
          onClick={addTodo}
          style={{
            padding: '10px 20px',
            background: '#61dafb',
            color: '#282c34',
            border: 'none',
            borderRadius: '0 4px 4px 0',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}
        >
          Add
        </button>
      </div>
      <div>
        {todos.map(todo => (
          <div
            key={todo.id}
            style={{
              display: 'flex',
              alignItems: 'center',
              padding: '10px',
              marginBottom: '5px',
              background: '#f8f9fa',
              borderRadius: '4px'
            }}
          >
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => toggleTodo(todo.id)}
              style={{ marginRight: '10px' }}
            />
            <span
              style={{
                flex: 1,
                textDecoration: todo.completed ? 'line-through' : 'none',
                color: todo.completed ? '#999' : '#333'
              }}
            >
              {todo.text}
            </span>
            <button
              onClick={() => deleteTodo(todo.id)}
              style={{
                padding: '5px 10px',
                background: '#f44336',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer'
              }}
            >
              Delete
            </button>
          </div>
        ))}
      </div>
    </div>
  );
}

render(<App />);`,

                fetch: `// API Fetch Example
function App() {
  const [posts, setPosts] = React.useState([]);
  const [loading, setLoading] = React.useState(false);
  
  const fetchPosts = async () => {
    setLoading(true);
    try {
      const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
      const data = await response.json();
      setPosts(data);
      console.log('Fetched posts:', data);
    } catch (error) {
      console.error('Error fetching posts:', error);
    } finally {
      setLoading(false);
    }
  };
  
  React.useEffect(() => {
    fetchPosts();
  }, []);
  
  return (
    <div style={{ padding: '20px' }}>
      <h2>üì° API Posts</h2>
      <button
        onClick={fetchPosts}
        style={{
          padding: '10px 20px',
          background: '#61dafb',
          color: '#282c34',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer',
          fontWeight: 'bold',
          marginBottom: '20px'
        }}
      >
        Refresh Posts
      </button>
      
      {loading ? (
        <p>Loading...</p>
      ) : (
        <div>
          {posts.map(post => (
            <div
              key={post.id}
              style={{
                padding: '15px',
                marginBottom: '10px',
                background: '#f8f9fa',
                borderRadius: '6px'
              }}
            >
              <h3 style={{ color: '#333', marginBottom: '5px' }}>
                {post.title}
              </h3>
              <p style={{ color: '#666' }}>
                {post.body}
              </p>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

render(<App />);`,

                timer: `// Timer with useEffect Example
function App() {
  const [seconds, setSeconds] = React.useState(0);
  const [isActive, setIsActive] = React.useState(false);
  
  React.useEffect(() => {
    let interval = null;
    
    if (isActive) {
      interval = setInterval(() => {
        setSeconds(seconds => seconds + 1);
      }, 1000);
    } else if (!isActive && seconds !== 0) {
      clearInterval(interval);
    }
    
    return () => clearInterval(interval);
  }, [isActive, seconds]);
  
  const toggle = () => {
    setIsActive(!isActive);
  };
  
  const reset = () => {
    setSeconds(0);
    setIsActive(false);
  };
  
  const formatTime = (totalSeconds) => {
    const hours = Math.floor(totalSeconds / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const secs = totalSeconds % 60;
    
    return \`\${hours.toString().padStart(2, '0')}:\${minutes.toString().padStart(2, '0')}:\${secs.toString().padStart(2, '0')}\`;
  };
  
  return (
    <div style={{ 
      padding: '40px', 
      textAlign: 'center',
      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
      borderRadius: '12px',
      color: 'white'
    }}>
      <h1 style={{ fontSize: '3em', marginBottom: '20px' }}>
        ‚è±Ô∏è {formatTime(seconds)}
      </h1>
      <div>
        <button
          onClick={toggle}
          style={{
            padding: '15px 30px',
            margin: '10px',
            background: isActive ? '#f44336' : '#4caf50',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            fontSize: '18px',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}
        >
          {isActive ? 'Pause' : 'Start'}
        </button>
        <button
          onClick={reset}
          style={{
            padding: '15px 30px',
            margin: '10px',
            background: '#2196f3',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            fontSize: '18px',
            cursor: 'pointer',
            fontWeight: 'bold'
          }}
        >
          Reset
        </button>
      </div>
    </div>
  );
}

render(<App />);`,

                context: `// Context API Theme Example
const ThemeContext = React.createContext();

function ThemeProvider({ children }) {
  const [theme, setTheme] = React.useState('light');
  
  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };
  
  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

function ThemedButton() {
  const { theme, toggleTheme } = React.useContext(ThemeContext);
  
  return (
    <button
      onClick={toggleTheme}
      style={{
        padding: '10px 20px',
        background: theme === 'light' ? '#333' : '#fff',
        color: theme === 'light' ? '#fff' : '#333',
        border: 'none',
        borderRadius: '6px',
        cursor: 'pointer',
        fontWeight: 'bold'
      }}
    >
      Toggle to {theme === 'light' ? 'Dark' : 'Light'} Mode
    </button>
  );
}

function Content() {
  const { theme } = React.useContext(ThemeContext);
  
  return (
    <div style={{
      padding: '20px',
      background: theme === 'light' ? '#fff' : '#333',
      color: theme === 'light' ? '#333' : '#fff',
      borderRadius: '8px',
      marginTop: '20px'
    }}>
      <h2>Current Theme: {theme}</h2>
      <p>This content adapts to the selected theme.</p>
    </div>
  );
}

function App() {
  return (
    <ThemeProvider>
      <div style={{ padding: '20px' }}>
        <h1>üé® Theme Context Example</h1>
        <ThemedButton />
        <Content />
      </div>
    </ThemeProvider>
  );
}

render(<App />);`
            };
            
            document.getElementById('code-editor').value = templates[template];
            updateLineNumbers();
            runCode();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const editor = document.getElementById('code-editor');
            const autoRun = document.getElementById('auto-run');
            
            // Load saved code if exists
            const savedCode = localStorage.getItem('react-playground-code');
            if (savedCode) {
                editor.value = savedCode;
            }
            
            // Update line numbers on input
            editor.addEventListener('input', () => {
                updateLineNumbers();
                if (autoRun.checked) {
                    runCode();
                }
            });
            
            // Keyboard shortcuts
            editor.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    runCode();
                }
                if (e.ctrlKey && e.shiftKey && e.key === 'F') {
                    e.preventDefault();
                    formatCode();
                }
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveCode();
                }
            });
            
            // Initial setup
            updateLineNumbers();
            runCode();
        });
    </script>
</body>
</html>